<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
    <link rel="stylesheet" href="/css/cafe.css" type="text">
    <style>
        /* 컨테이너를 화면 중앙에 정렬 */
        .container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
        }

        /* 버튼들을 가운데로 정렬 */
        button {
            margin: 5px; /* 버튼 간격 조정 */
        }

        /* Prev, HOME, Next 버튼들을 가운데로 정렬 */
        .container > div:first-child {
            margin-top: 10px; /* h1 요소와의 간격 조정 */
        }

        /* 리스트 테이블 스타일링 */
        table {
            border-collapse: collapse;
            width: 80%;
            margin-top: 10px;
        }

        th, td {
            border: 1px solid black;
            padding: 8px;
            text-align: left;
        }

        th {
            background-color: #f2f2f2;
        }

        /* 체크박스 스타일링 */
        .checkbox {
            width: 20px;
        }

        a {
            color: darkred;
            text-decoration: none;
        }
    </style>

</head>
<body>

<div class="container">
    <h1>
        <span th:text="|안녕하세요 ${session.userinfo.nick}님|"></span>
        <!--        session 을 통해서 저장 해두면 , 타임 리프에서 session.세션이름.가져올거 하면 가져올 수 있다 =복쌤 -->
        <!--        이 정보가 새로고침 되면 없어진다.. 왜그럴까-->
        <!--        TEST-->
    </h1>

    <!--        <tr th:each="cafe : ${cafeinfo}">-->
    <!--            <td>1</td>-->
    <!--            <td><span th:text="${cafe.user.name}"></span></td>-->
    <!--            <td><span th:text="${cafe.name}"></span></td>-->

    <table>
        <tr>
            <th>장소</th>
            <th>전화번호</th>
            <th>주소</th>
            <th>도로명주소</th>
            <th>기능</th>
            <!-- 필요한 다른 컬럼들도 추가 -->
        </tr>
        <tr th:each="cafe, status : ${cafeinfo}"  th:object="${cafe}">
            <td th:text="${cafe.name}"></td>
            <td th:text="${cafe.number}"></td>
            <td th:text="${cafe.addr}"></td>
            <td th:text="${cafe.addr2}"></td>
            <td>

                <form id="infoCafe" action="/infoCafe" method="post">
                    <button type="submit" th:name="infoCafe" th:value="${cafe.idx}" th:id="${cafe.idx}"
                            onclick="return goToReserveCafePage();">정보
                    </button>
                </form>

                <!--                    // 어짜피 DB 에 저장이 되어 있으니까 DB 의 정보만 빼온다면?-->
                <!--                    <input type="button" action="/infoCafe" value="정보" onclick="goToReserveCafePage()">-->
                <!-- 삭제 버튼 클릭 시 실행될 동작을 구현, 버튼의 id에 고유한 값 부여 -->
                <!--                    <input type="hidden" th:name="'id'" th:value="${cafe.id}"/>-->
                <form id="deleteForm" action="/delete" method="post">
                    <button type="submit" th:name="deleteForm" th:value="${cafe.idx}" th:id="${cafe.idx}"
                            onclick="return confirmDelete();">삭제
                    </button>
                    <!--                    상원대장 아이디어 반영 (onclick="return confirmDelete();) -->
                    <!--                    name 의 값이 전달하는 값. (@RequestParam)-->
                </form>
            </td>
    </table>
    <div>
        <input type="button" value="추가" onclick="goToUserAddPage()">

    </div>
    <div>
        <button>Prev</button>
        <button onclick="goToHomePage()">HOME</button>
        <button onclick="goToBoardPage()" >글쓰기 페이지 </button>

    </div>
</div>
</body>
<script>


    // 회원가입 버튼 클릭 시 페이지 이동
    function goToUserAddPage() {
        window.location.href = "/search2";
    }

    function goToReserveCafePage() {
        window.location.href = "/reserve";
    }

    function goToHomePage() {
        window.location.href = "/home";
    }

    function goToBoardPage() {
        window.location.href = "/board";
    }

    function goToTestPage() {
        window.location.href = "/test";
    }

    function confirmDelete() {
        // "정말로 삭제하시겠습니까?" 라는 알림창 띄우기
        let id = document.getElementById("deleteForm").value;
        var result = confirm("정말로 삭제하시겠습니까?");

        // 확인 버튼이 클릭되었을 때
        if (result) {
            // 삭제 처리를 수행하는 로직
            // HTML form 제출

            console.log("삭제되었습니다."); // 예시로 콘솔에 로그 출력
            return true;
        } else {
            // 취소 버튼이 클릭되었을 때
            console.log("삭제가 취소되었습니다."); // 예시로 콘솔에 로그 출력
            return false;
        }
    }

    // ajax 사용 보류.
    // // 삭제 버튼 클릭 시 , 데이터 삭제
    // var article = {
    //     init: function () {
    //         var _this = this;
    //
    //         // 버튼 선택
    //         const destroyBtn = document.querySelector('#deleteBtn');
    //
    //         // 버튼 클릭 시 , 동작 할 메소드를 연결
    //         if (destroyBtn) {
    //             destroyBtn.addEventListener('click', _this.delete);
    //         }
    //     },
    //     // delete 메서드
    //     delete: function () {
    //         var split = location.pathname.split('/');
    //         var id = split[split.length - 1];
    //
    //         // 데이터 삭제 요청
    //         // fetch(URL, HTTP_REQUEST)
    //         fetch('/home/' + id, {
    //             method: 'DELETE',
    //         }).then(function (response) {
    //             // 요청 성공 !
    //             if (response.ok) {
    //                 alert('삭제 되었습니다.');
    //                 window.location.href = '/home.html';
    //             } else { // 요청 실패 ..
    //                 alert('글을 삭제 할 수 없습니다.');
    //
    //             }
    //         });
    //     }
    // };
    //
    // article.init();
</script>
</html>
